# Сервер на Express для відображення статей

## Опис
Цей проєкт — простий сервер на Node.js з використанням фреймворку **Express** та шаблонізаторів: **Pug** відображає список користувачів та детальну інформацію про кожного з них та
**EJS** для відображення списку статей і детальної сторінки кожної статті.

## Функціонал
- Відображення списку всіх статей (`/articles`)
- Перегляд детальної сторінки окремої статті (`/articles/:id`)
- Відображення списку всіх користувачів (`/users`)
- Перегляд детальної сторінки окремого користувача (`/users/:id`)

## Встановлення та запуск

1. Клонувати репозиторій:
   ```bash
   git clone <посилання-на-репозиторій>
   cd <папка-проєкту>
   
2. Встановити залежності:
   ```bash
   npm install

3. Запустити сервер:
   ```bash
   npm start
   
4. Відкрити в браузері:
http://localhost:3000/articles
http://localhost:3000/users

5. Маршрути
| Метод | Шлях         | Опис                                                 |
| ----- | ------------ | ---------------------------------------------------- |
| GET   | `/users`     | Повертає список усіх користувачів                    |
| GET   | `/users/:id` | Повертає детальну інформацію про користувача за `id` |


| Метод | Шлях            | Опис                            |
| ----- | --------------- | ------------------------------- |
| GET   | `/articles`     | Повертає список усіх статей     |
| GET   | `/articles/:id` | Повертає одну статтю за її `id` |

1. /theme — керування темою сайту
| Метод | URL                | Опис                              | Параметри / тіло запиту | Відповідь                                    |                                     |
| ----- | ------------------ | --------------------------------- | ----------------------- | -------------------------------------------- | ----------------------------------- |
| GET   | `/theme/get-theme` | Отримати поточну тему користувача | —                       | `{ theme: "light" }` або `{ theme: "dark" }` |                                     |
| POST  | `/theme/set-theme` | Встановити тему користувача       | \`{ theme: "light"      | "dark" }\`                                   | `{ message: "Theme set to light" }` |


Опис:
Теми зберігаються у cookie siteTheme.
GET повертає поточну тему.
POST встановлює нову тему та зберігає її в cookie з httpOnly: true і path: "/".


/auth — реєстрація та вхід користувача через JWT
| Метод | URL              | Опис                              | Параметри / тіло запиту | Відповідь                                              |
| ----- | ---------------- | --------------------------------- | ----------------------- | ------------------------------------------------------ |
| POST  | `/auth/register` | Реєстрація нового користувача     | `{ name, password }`    | `{ message: "User registered" }`                       |
| POST  | `/auth/login`    | Вхід користувача та генерація JWT | `{ name, password }`    | `{ token: "<JWT>" }` (і встановлюється cookie `token`) |


Опис:
Генерує JWT і зберігає його в cookie token з httpOnly: true.
Cookie використовується для авторизації захищених маршрутів.

/secure — захищені маршрути (тільки для авторизованих користувачів)
| Метод | URL                 | Опис                             | Параметри / тіло запиту | Відповідь                    |
| ----- | ------------------- | -------------------------------- | ----------------------- | ---------------------------- |
| GET   | `/secure/users`     | Отримати список користувачів     | —                       | `[ { id, name, age }, ... ]` |
| GET   | `/secure/users/:id` | Отримати дані одного користувача | `id` в URL              | `{ id, name, age }`          |


Опис:
Всі маршрути захищені middleware authenticateJWT.
Middleware перевіряє JWT у cookie token. Якщо токен відсутній або недійсний — повертає 401 або 403.
Якщо токен дійсний — запит проходить далі і повертаються дані.

6. Залежності
express — веб-фреймворк для Node.js
ejs — шаблонізатор
pug — шаблонізатор



